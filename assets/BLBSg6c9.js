import{u as f,_ as g,q as b}from"./BqjFTVVz.js";import{m as k,j as x,c as _,n as w,v as C,a as m,p as N,b as S,r,o as v}from"./CbwfrDF2.js";import{C as y}from"./BuVn8SrB.js";const B={key:0,class:"lock-box flex items-stretch"},j={key:1},D={__name:"[...slug]",async setup(A){let e,l;const o=r(""),c=r(!1),u=r(null),p=k();console.log("Current route:",p.path);const n=p.path.substring(9);console.log("Fetching markdown page for path:",n);const{data:s}=([e,l]=x(()=>f("content-"+n,()=>b("content").where("name","=",n).first(),"$IQkBNiO3N6")),e=await e,l(),e);console.log(s);function i(){if(!s.value){alert("內容不存在");return}const d=s.value.content;try{const t=y.AES.decrypt(d,o.value).toString(y.enc.Utf8);u.value=JSON.parse(t),t?c.value=!0:alert("密碼錯誤")}catch{alert("密碼錯誤")}}return(d,a)=>{const t=g;return c.value?(v(),_("div",j,[S(t,{value:u.value},null,8,["value"])])):(v(),_("div",B,[w(m("input",{"onUpdate:modelValue":a[0]||(a[0]=h=>o.value=h),type:"password",class:"ml-2 py-2",placeholder:"輸入密碼",onKeyup:N(i,["enter"])},null,544),[[C,o.value]]),m("button",{onClick:i,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"解鎖")]))}}};export{D as default};
